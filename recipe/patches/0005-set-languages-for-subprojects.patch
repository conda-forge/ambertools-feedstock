From b11c6fb195b4e367357bc97e390b9242660acaa8 Mon Sep 17 00:00:00 2001
From: "H. Vetinari" <h.vetinari@gmx.com>
Date: Wed, 28 Aug 2024 15:51:03 +1100
Subject: [PATCH 5/5] set languages for subprojects

avoids `CMake can not determine linker language for target:`
---
 AmberTools/src/cpptraj/CMakeLists.txt | 1 +
 AmberTools/src/quick/CMakeLists.txt   | 4 ++++
 2 files changed, 5 insertions(+)

diff --git a/AmberTools/src/cpptraj/CMakeLists.txt b/AmberTools/src/cpptraj/CMakeLists.txt
index 25e66a6c..111a43c8 100644
--- a/AmberTools/src/cpptraj/CMakeLists.txt
+++ b/AmberTools/src/cpptraj/CMakeLists.txt
@@ -91,6 +91,7 @@ endif()
 
 # Ensure the flag for PIC is added for NVCC
 if (CUDA AND CUDA_FOUND)
+  enable_language(CUDA)
   if (SHARED)
     if(${COMPILER} STREQUAL GNU OR ${COMPILER} STREQUAL CLANG)
       set(CPPTRAJ_NVCC_PIC_FLAG "--compiler-options -fPIC")
diff --git a/AmberTools/src/quick/CMakeLists.txt b/AmberTools/src/quick/CMakeLists.txt
index 475f6d80..c7955555 100644
--- a/AmberTools/src/quick/CMakeLists.txt
+++ b/AmberTools/src/quick/CMakeLists.txt
@@ -240,6 +240,10 @@ endif()
 # --------------------------------------------------------------------
 include(QUICKCudaConfig)
 
+if (CUDA)
+    enable_language(CUDA)
+endif()
+
 #--------------------------------------------------------------	
 # Build code
 
